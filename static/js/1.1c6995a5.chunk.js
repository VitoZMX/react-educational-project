"use strict";(self.webpackChunkreact_project=self.webpackChunkreact_project||[]).push([[1],{2480:function(e,s,t){t.r(s),t.d(s,{default:function(){return T}});var r=t(1413),i=t(4165),n=t(5861),o=t(2791),a=t(9439),l="ProfileInfo_descriptionBlock__mlQUx",u="ProfileInfo_fullName__ha-0w",c="ProfileInfo_contact__dPimF",d=t(3445),f=t(778),h=t(184),j=function(e){var s=(0,o.useState)(!1),t=(0,a.Z)(s,2),r=t[0],i=t[1],n=(0,o.useState)(e.status),l=(0,a.Z)(n,2),u=l[0],c=l[1];(0,o.useEffect)((function(){c(e.status)}),[e.status]);return(0,h.jsxs)("div",{children:[!r&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Status:"}),(0,h.jsxs)("span",{onDoubleClick:function(){i(!0)},children:[" ",e.status||"No status"]})]}),r&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Status:"}),(0,h.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.updateStatus(u)},value:u})]})]})},x="ProfileDataForm_fullName__5RvdB",p="ProfileDataForm_contact__eQLJW",v=t(5413),m=t(704),b=t(9234),g=(0,m.Z)({form:"edit-profile"})((function(e){var s=e.handleSubmit,t=e.profile,r=e.error;return(0,h.jsxs)("form",{onSubmit:s,children:[(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Save profile data"})}),r&&(0,h.jsx)("div",{className:b.Z.formSummaryError,children:r}),(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:x,children:(0,v.Gr)("Full name","fullName",[],v.II)})}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job:"})," ",(0,v.Gr)("lookingForAJob","lookingForAJob",[],v.II,{type:"checkbox"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills:"}),(0,v.Gr)("My professional skills","lookingForAJobDescription",[],v.gx)]})]}),(0,h.jsx)("div",{children:(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me:"})," ",(0,v.Gr)("About me","aboutMe",[],v.gx)]})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Contact:"})," ",Object.keys(t.contacts).map((function(e){return(0,h.jsx)("div",{className:p,children:(0,h.jsxs)("b",{children:[e,": ",(0,v.Gr)(e,"contacts."+e,[],v.II)]})},e)}))]})]})})),P=function(e){var s=e.profile,t=e.isOwner,r=e.goToEditMode;return(0,h.jsxs)("div",{children:[t&&(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:r,children:"Edit profile"})}),(0,h.jsx)("div",{className:u,children:s.fullName}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job:"})," ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob?(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills:"})," ",s.lookingForAJobDescription]}):null]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me:"})," ",s.aboutMe]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Contact:"}),Object.keys(s.contacts).map((function(e){return(0,h.jsx)(k,{contactTitle:e,contactValue:s.contacts[e]},e)}))]})]})},k=function(e){var s=e.contactTitle,t=e.contactValue;return(0,h.jsxs)("div",{className:c,children:[(0,h.jsxs)("b",{children:[s,": "]}),t]})},_=function(e){var s=e.profile,t=e.status,r=e.updateStatus,i=e.isOwner,n=e.savePhoto,u=e.saveProfile,c=(0,o.useState)(!1),x=(0,a.Z)(c,2),p=x[0],v=x[1];if(!s)return(0,h.jsx)(d.Z,{});return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:l,children:[(0,h.jsx)("img",{src:s.photos.large||f}),(0,h.jsx)("div",{children:i&&(0,h.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files.length&&n(e.target.files[0])}})}),(0,h.jsx)(j,{status:t,updateStatus:r}),p?(0,h.jsx)(g,{initialValues:s,profile:s,onSubmit:function(e){u(e).then((function(){v(!1)}))}}):(0,h.jsx)(P,{goToEditMode:function(){v(!0)},profile:s,isOwner:i})]})})},S=t(4294),I=t(3433),N="MyPosts_conteinerPosts__Aytkj",w="MyPosts_posts__a3lX0",y="Post_item__wBQrE",C=t.p+"static/media/avaCat.f5995d21302dfb5fb17b.jpeg",A=function(e){return(0,h.jsxs)("div",{className:y,children:[(0,h.jsx)("img",{src:C,alt:"img"}),(0,h.jsx)("span",{children:e.message}),(0,h.jsx)("div",{children:(0,h.jsxs)("span",{children:["like ",e.likeCount]})})]})},Z=t(3079),F=(0,m.Z)({form:"profile-add-post"})((function(e){return(0,h.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,h.jsx)("div",{children:(0,v.Gr)("You post","newPostText",[Z.C],v.II)}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Add post"})})]})})),M=function(e){console.log("RENDER MyPosts");var s=(0,I.Z)(e.posts).reverse().map((function(e){return(0,h.jsx)(A,{message:e.message,likeCount:e.likesCount},e.id)}));return(0,h.jsxs)("div",{className:N,children:[(0,h.jsx)("h3",{children:"My posts"}),(0,h.jsx)(F,{onSubmit:function(s){e.addPost(s.newPostText)}}),(0,h.jsx)("div",{className:w,children:s})]})},U=o.memo(M),E=t(8687),O=(0,E.$j)((function(e){return{posts:e.profilePage.posts}}),{addPost:S.Nw.addPostActionCreator})(U),J=function(e){return(0,h.jsxs)("div",{children:[(0,h.jsx)(_,{isOwner:e.isOwner,savePhoto:e.savePhoto,profile:e.profile,status:e.status,saveProfile:e.saveProfile,updateStatus:e.updateStatus}),(0,h.jsx)(O,{})]})},D=t(7689),T=(0,t(7781).qC)((0,E.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:S.et,getStatus:S.lR,updateStatus:S.Nf,savePhoto:S.Ju,saveProfile:S.Ii}))((function(e){(0,D.s0)();var s=(0,D.UO)();(0,o.useEffect)((function(){var t=function(){var t=(0,n.Z)((0,i.Z)().mark((function t(){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=s.userId?+s.userId:e.authorizedUserId){t.next=4;break}return console.error("ID should exist in URI params or in state ('authorizedUserId')"),t.abrupt("return");case 4:return t.next=6,e.getUserProfile(r);case 6:e.getStatus(r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[s.userId,e.authorizedUserId,e.getUserProfile,e.getStatus]);var t=!s.userId;return(0,h.jsx)(J,(0,r.Z)((0,r.Z)({},e),{},{isOwner:t,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto}))}))}}]);
//# sourceMappingURL=1.1c6995a5.chunk.js.map