{"version":3,"file":"static/js/925.b8baba2f.chunk.js","mappings":"6KAIMA,EAAY,IAAIC,UAAU,gEAe1BC,EAAiB,WACnB,OAAOC,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACHC,EAAAA,EAAAA,KAACC,EAAQ,KACTD,EAAAA,EAAAA,KAACE,EAAc,MAEvB,EAEMD,EAAqB,WACvB,IAAAE,GACMC,EAAAA,EAAAA,UAA4B,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAD9BI,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAU5B,OAPAI,EAAAA,EAAAA,YAAU,WACNd,EAAUe,iBAAiB,WAAW,SAACC,GACnC,IAAIC,EAAcC,KAAKC,MAAMH,EAAEI,MAC/BP,GAAY,SAACQ,GAAY,SAAAC,QAAAC,EAAAA,EAAAA,GAASF,IAAYE,EAAAA,EAAAA,GAAKN,GAAW,GAClE,GACJ,GAAG,KAEIZ,EAAAA,EAAAA,KAAA,OAAKmB,MAAO,CAACC,OAAQ,QAASC,UAAW,QAAQtB,SACnDQ,EAASe,KAAI,SAACC,EAAGC,GAAK,OAAKxB,EAAAA,EAAAA,KAACyB,EAAO,CAAaC,QAASH,GAAhBC,EAAoB,KAGtE,EAEMC,EAAkD,SAAHE,GAAmB,IAAdD,EAAOC,EAAPD,QACtD,OAAO5B,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACHD,EAAAA,EAAAA,MAAA,OAAKqB,MAAO,CAACS,QAAS,OAAQC,WAAY,UAAU9B,SAAA,EAChDC,EAAAA,EAAAA,KAAA,OAAK8B,IAAsB,MAAjBJ,EAAQK,MAAgBL,EAAQK,MAAQC,EAC7Cb,MAAO,CAACc,aAAc,MAAOC,MAAO,WAEzCpC,EAAAA,EAAAA,MAAA,OAAKqB,MAAO,CAACgB,OAAQ,cAAcpC,SAAA,EAC/BC,EAAAA,EAAAA,KAAA,KAAAD,SAAI2B,EAAQU,YACZpC,EAAAA,EAAAA,KAAA,UACAF,EAAAA,EAAAA,MAAA,KAAAC,SAAA,CAAG,OAAK2B,EAAQW,iBAGxBrC,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,MAAAD,SAAK2B,EAAQA,WACb1B,EAAAA,EAAAA,KAAA,WAER,EAEME,EAA2B,WAC7B,IAAAoC,GAA8BlC,EAAAA,EAAAA,UAAS,IAAGmC,GAAAjC,EAAAA,EAAAA,GAAAgC,EAAA,GAAnCZ,EAAOa,EAAA,GAAEC,EAAUD,EAAA,GAU1B,OAAOzC,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACHC,EAAAA,EAAAA,KAAA,OAAAD,UACIC,EAAAA,EAAAA,KAAA,YAAUyC,SAAU,SAAC9B,GAAC,OAAK6B,EAAW7B,EAAE+B,cAAcC,MAAM,EAAEA,MAAOjB,OAEzE1B,EAAAA,EAAAA,KAAA,OAAAD,UACIC,EAAAA,EAAAA,KAAA,UAAQ4C,QAbW,WAClBlB,EAAQmB,SAGblD,EAAUmD,KAAKpB,GACfc,EAAW,IACf,EAO4CzC,SAAC,aAGjD,EAEA,UArE2B,WACvB,OAAOC,EAAAA,EAAAA,KAAA,OAAAD,UACHC,EAAAA,EAAAA,KAACH,EAAI,KAEb,C","sources":["pages/Chat/ChatPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport userPhoto from '../../assets/images/noimg.jpeg'\r\n\r\n\r\nconst wsChannel = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n\r\nexport type ChatMessageType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}\r\n\r\nconst ChatPage: React.FC = () => {\r\n    return <div>\r\n        <Chat/>\r\n    </div>\r\n}\r\n\r\nconst Chat: React.FC = () => {\r\n    return <div>\r\n        <Messages/>\r\n        <AddMessageForm/>\r\n    </div>\r\n}\r\n\r\nconst Messages: React.FC = () => {\r\n    const [messages, setMessages]\r\n        = useState<ChatMessageType[]>([])\r\n\r\n    useEffect(() => {\r\n        wsChannel.addEventListener('message', (e: MessageEvent) => {\r\n            let newMessages = JSON.parse(e.data)\r\n            setMessages((prevMessages) => [...prevMessages, ...newMessages])\r\n        })\r\n    }, [])\r\n\r\n    return <div style={{height: '600px', overflowY: 'auto'}}>\r\n        {messages.map((m, index) => <Message key={index} message={m}/>)}\r\n\r\n    </div>\r\n}\r\n\r\nconst Message: React.FC<{ message: ChatMessageType }> = ({message}) => {\r\n    return <div>\r\n        <div style={{display: 'flex', alignItems: 'center'}}>\r\n            <img src={message.photo != null ? message.photo : userPhoto}\r\n                 style={{borderRadius: '50%', width: '50px',}}/>\r\n\r\n            <div style={{margin: ' 8px  8px '}}>\r\n                <b>{message.userName}</b>\r\n                <br/>\r\n                <a>ID: {message.userId}</a>\r\n            </div>\r\n        </div>\r\n        <br/>\r\n        <h3>{message.message}</h3>\r\n        <hr/>\r\n    </div>\r\n}\r\n\r\nconst AddMessageForm: React.FC = () => {\r\n    const [message, setMessage] = useState('')\r\n\r\n    const sendMessageHandler = () => {\r\n        if (!message.trim()) {\r\n            return\r\n        }\r\n        wsChannel.send(message)\r\n        setMessage('')\r\n    }\r\n\r\n    return <div>\r\n        <div>\r\n            <textarea onChange={(e) => setMessage(e.currentTarget.value)} value={message}></textarea>\r\n        </div>\r\n        <div>\r\n            <button onClick={sendMessageHandler}>Send</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default ChatPage"],"names":["wsChannel","WebSocket","Chat","_jsxs","children","_jsx","Messages","AddMessageForm","_useState","useState","_useState2","_slicedToArray","messages","setMessages","useEffect","addEventListener","e","newMessages","JSON","parse","data","prevMessages","concat","_toConsumableArray","style","height","overflowY","map","m","index","Message","message","_ref","display","alignItems","src","photo","userPhoto","borderRadius","width","margin","userName","userId","_useState3","_useState4","setMessage","onChange","currentTarget","value","onClick","trim","send"],"sourceRoot":""}