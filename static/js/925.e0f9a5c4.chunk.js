"use strict";(self.webpackChunkreact_project=self.webpackChunkreact_project||[]).push([[925],{925:function(e,n,s){s.r(n);var t=s(3433),r=s(9439),i=s(2791),l=s(778),u=s(184),o=function(){var e=(0,i.useState)(null),n=(0,r.Z)(e,2),s=n[0],t=n[1];return(0,i.useEffect)((function(){var e,n=function(){console.log("CLOSE WS"),setTimeout(s,2e3)};function s(){var s,r,i;null===(s=e)||void 0===s||s.removeEventListener("close",n),null===(r=e)||void 0===r||r.close(),null===(i=e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))||void 0===i||i.addEventListener("close",n),t(e)}return s(),function(){e.removeEventListener("close",n),e.close()}}),[]),(0,u.jsxs)("div",{children:[(0,u.jsx)(a,{wsChannel:s}),(0,u.jsx)(d,{wsChannel:s})]})},a=function(e){var n=e.wsChannel,s=(0,i.useState)([]),l=(0,r.Z)(s,2),o=l[0],a=l[1];return(0,i.useEffect)((function(){var e=function(e){var n=JSON.parse(e.data);a((function(e){return[].concat((0,t.Z)(e),(0,t.Z)(n))}))};return null===n||void 0===n||n.addEventListener("message",e),function(){null===n||void 0===n||n.removeEventListener("message",e)}}),[n]),(0,u.jsx)("div",{style:{height:"600px",overflowY:"auto"},children:o.map((function(e,n){return(0,u.jsx)(c,{message:e},n)}))})},c=function(e){var n=e.message;return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,u.jsx)("img",{src:null!=n.photo?n.photo:l,style:{borderRadius:"50%",width:"50px"}}),(0,u.jsxs)("div",{style:{margin:" 8px  8px "},children:[(0,u.jsx)("b",{children:n.userName}),(0,u.jsx)("br",{}),(0,u.jsxs)("a",{children:["ID: ",n.userId]})]})]}),(0,u.jsx)("br",{}),(0,u.jsx)("h3",{children:n.message}),(0,u.jsx)("hr",{})]})},d=function(e){var n=e.wsChannel,s=(0,i.useState)(""),t=(0,r.Z)(s,2),l=t[0],o=t[1],a=(0,i.useState)("pending"),c=(0,r.Z)(a,2),d=c[0],v=c[1];(0,i.useEffect)((function(){var e=function(){v("ready")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]);return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("textarea",{onChange:function(e){return o(e.currentTarget.value)},value:l})}),(0,u.jsx)("div",{children:(0,u.jsx)("button",{disabled:null===n||"ready"!==d,onClick:function(){l.trim()&&(null===n||void 0===n||n.send(l),o(""))},children:"Send"})})]})};n.default=function(){return(0,u.jsx)("div",{children:(0,u.jsx)(o,{})})}}}]);
//# sourceMappingURL=925.e0f9a5c4.chunk.js.map